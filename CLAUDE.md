# techLEAD v2 - Autonomous Project Orchestration

## Project Overview

techLEAD v2 is a Claude Code-native system for autonomous software development orchestration. It coordinates GitHub Actions runners, manages development workflows, and makes strategic decisions about project progress.

## Architecture

- **Main Orchestrator**: techLEAD (Claude Code session)
- **Implementation**: @claude GitHub Actions runner
- **Code Review**: @claude-review GitHub Actions runner (auto-triggered on PR)
- **Testing**: test-builder subagent (local)
- **Review Analysis**: code-analyzer subagent (local)
- **Final Validation**: final-validator subagent (local, Playwright)

## Workflow

1. PM starts session with `/techlead`
2. techLEAD lists issues, gets prioritization
3. techLEAD analyzes issue, posts @claude comment
4. Monitors runner via Docker logs (blocking)
5. Spawns test-builder for testing
6. Creates PR (auto-triggers @claude-review)
7. Analyzes review with code-analyzer
8. Iterates until approved
9. Spawns final-validator for pre-merge checks
10. Merges with detailed summary
11. Updates memory and state

## Project Standards

### Code Style
- Follow existing patterns in the codebase
- Use clear, descriptive variable names
- Add comments for complex logic
- Keep functions focused and single-purpose

### Testing
- Minimum 80% coverage for new code
- Test happy paths and error cases
- Use existing test patterns
- Run full test suite before merge

### Commits
- Use conventional commit format
- Write clear, descriptive messages
- Reference issues in commits
- Sign commits with "ðŸ¤– Generated by techLEAD" when applicable

### Documentation
- Update README for new features
- Add inline comments for complex logic
- Document API changes
- Keep CLAUDE.md updated with patterns

## Recent Work

_To be updated by techLEAD after each completion_

## Known Patterns

_To be documented as patterns emerge_

## PM Preferences

_To be learned over time_

## Development Guidelines

### When Working on This Project

1. **Never write implementation code directly** - Always coordinate via @claude runner
2. **Always maintain state** - Update workflow_state.json after each step
3. **Use blocking monitors** - Don't poll, use .techlead/monitor.sh scripts
4. **Track progress** - Use TodoWrite for all workflows
5. **Learn and adapt** - Update CLAUDE.md with new patterns

### Subagent Usage

**test-builder**: Creates comprehensive tests
- Analyzes implementation changes
- Follows existing test patterns
- Aims for >80% coverage
- Iterates on failures (max 5 attempts)

**code-analyzer**: Interprets review feedback
- Categorizes: CRITICAL, IMPORTANT, OPTIONAL, IGNORE
- Provides implementation guidance
- Estimates complexity

**final-validator**: Pre-merge validation
- Runs full test suite
- Executes linting and build
- Runs E2E tests (Playwright)
- Verifies GitHub checks

## Issue Management

### Prioritization Criteria

1. **Security issues** - Highest priority
2. **Bugs affecting users** - High priority
3. **Features in progress** - Medium priority
4. **Enhancements** - Lower priority
5. **Polish/cleanup** - Lowest priority

### Sequence Planning

Group related issues for efficient implementation:
- Security stack (auth, rate limiting, CSRF)
- Feature stack (related features)
- Refactoring stack (technical debt)

## Error Handling

### Runner Failures

If @claude runner fails:
1. Check Docker logs: `docker logs <container>`
2. Review GitHub workflow logs: `gh run view <run_id> --log`
3. Escalate to PM with logs and options

### Review Failures

If code review has critical issues:
1. Use code-analyzer to categorize
2. Present findings to PM
3. Get approval for fixes
4. Coordinate via @claude runner

### Test Failures

If tests fail during validation:
1. Identify which tests failed
2. Analyze failure reasons
3. If implementation issue: Escalate to PM
4. If test issue: Use test-builder to fix

## State Management

### Workflow State Structure

```json
{
  "mode": "single_issue" | "sequence" | "idle",
  "workflow_type": "implementation",
  "issue": 42,
  "issue_sequence": [42, 48, 50],
  "current_sequence_index": 0,
  "started": "2025-10-02T18:00:00Z",
  "last_updated": "2025-10-02T18:30:00Z",
  "current_step": 9,
  "total_steps": 30,
  "checklist": [...]
}
```

### Resume Capability

When workflow is interrupted:
1. State is saved to workflow_state.json
2. On next `/techlead` initialization:
   - Check if state exists
   - If recent (<24h): Offer to resume
   - If stale: Archive and start fresh
3. Resume from last completed step

## Monitoring

### Docker Log Monitoring

All runner monitoring uses Docker logs for real-time feedback:
- `.techlead/monitor.sh implement` - Monitor @claude implementation
- `.techlead/monitor.sh review` - Monitor @claude-review
- `.techlead/monitor.sh test` - Monitor @claude-test

Scripts are **blocking** - techLEAD waits for completion, then automatically continues.

## Memory System

- **CLAUDE.md** - This file, loaded on /techlead initialization
- **workflow_state.json** - Current workflow state (runtime)
- **decisions_log.jsonl** - Historical decisions
- **work_log.jsonl** - Execution history
- **github_ops.log** - GitHub operations log
- **workflow_state.log** - State change log

## Tips for Success

1. **Trust the process** - techLEAD follows a proven 30-step workflow
2. **Review at checkpoints** - PM approval required for key decisions
3. **Monitor progress** - Use TodoWrite checklist for visibility
4. **Learn from history** - Check decisions_log.jsonl for patterns
5. **Keep memory updated** - Document new patterns in CLAUDE.md

---

**Version**: 2.0.0
**Last Updated**: 2025-10-02
**Status**: Active
